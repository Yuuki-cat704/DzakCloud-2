{"version":3,"file":"node-build.mjs","sources":["../../server/migrate.ts","../../server/db.ts","../../server/routes/demo.ts","../../server/routes/payment.ts","../../server/routes/contact.ts","../../server/routes/auth.ts","../../server/index.ts","../../server/node-build.ts"],"sourcesContent":["import { getPool } from \"./db\";\nimport fs from \"fs\";\nimport path from \"path\";\n\ninterface User {\n  id: string;\n  email: string;\n  password: string;\n  name?: string;\n  fullName?: string;\n  createdAt?: string;\n  updatedAt?: string;\n}\n\ninterface Payment {\n  id: string;\n  email: string;\n  package?: string;\n  service?: string;\n  amount: number;\n  status?: string;\n  qrCodeUrl?: string;\n  createdAt?: string;\n  updatedAt?: string;\n}\n\ninterface Contact {\n  id: string;\n  name: string;\n  email: string;\n  topic: string;\n  subject: string;\n  description: string;\n  status?: string;\n  notes?: string;\n  createdAt?: string;\n  updatedAt?: string;\n}\n\nasync function migrateUsers() {\n  try {\n    const usersPath = path.join(process.cwd(), \"data\", \"users.json\");\n\n    if (!fs.existsSync(usersPath)) {\n      console.log(\"‚è≠Ô∏è  No users.json file found, skipping users migration\");\n      return;\n    }\n\n    const data = fs.readFileSync(usersPath, \"utf-8\");\n    const users: User[] = JSON.parse(data);\n\n    if (users.length === 0) {\n      console.log(\"‚è≠Ô∏è  No users to migrate\");\n      return;\n    }\n\n    const pool = await getPool();\n\n    for (const user of users) {\n      try {\n        await pool.execute(\n          `INSERT INTO users (email, password, fullName, createdAt, updatedAt) \n           VALUES (?, ?, ?, ?, ?) \n           ON DUPLICATE KEY UPDATE email=email`,\n          [\n            user.email,\n            user.password,\n            user.name || user.fullName || \"Unknown\",\n            user.createdAt || new Date().toISOString(),\n            user.updatedAt || new Date().toISOString(),\n          ]\n        );\n      } catch (error: any) {\n        if (!error.message.includes(\"Duplicate entry\")) {\n          console.error(`Error migrating user ${user.email}:`, error.message);\n        }\n      }\n    }\n\n    console.log(`‚úÖ Migrated ${users.length} users successfully`);\n  } catch (error) {\n    console.error(\"Error during users migration:\", error);\n  }\n}\n\nasync function migratePayments() {\n  try {\n    const paymentsPath = path.join(process.cwd(), \"data\", \"payments.json\");\n\n    if (!fs.existsSync(paymentsPath)) {\n      console.log(\"‚è≠Ô∏è  No payments.json file found, skipping payments migration\");\n      return;\n    }\n\n    const data = fs.readFileSync(paymentsPath, \"utf-8\");\n    const payments: Payment[] = JSON.parse(data);\n\n    if (payments.length === 0) {\n      console.log(\"‚è≠Ô∏è  No payments to migrate\");\n      return;\n    }\n\n    const pool = await getPool();\n\n    for (const payment of payments) {\n      try {\n        await pool.execute(\n          `INSERT INTO payments (email, service, amount, paymentId, status, qrCodeUrl, createdAt, updatedAt) \n           VALUES (?, ?, ?, ?, ?, ?, ?, ?) \n           ON DUPLICATE KEY UPDATE email=email`,\n          [\n            payment.email,\n            payment.service || payment.package || \"Unknown Service\",\n            payment.amount,\n            payment.id,\n            payment.status || \"pending\",\n            payment.qrCodeUrl || null,\n            payment.createdAt || new Date().toISOString(),\n            payment.updatedAt || new Date().toISOString(),\n          ]\n        );\n      } catch (error: any) {\n        if (!error.message.includes(\"Duplicate entry\")) {\n          console.error(`Error migrating payment ${payment.id}:`, error.message);\n        }\n      }\n    }\n\n    console.log(`‚úÖ Migrated ${payments.length} payments successfully`);\n  } catch (error) {\n    console.error(\"Error during payments migration:\", error);\n  }\n}\n\nasync function migrateContacts() {\n  try {\n    const contactsPath = path.join(process.cwd(), \"data\", \"contacts.json\");\n\n    if (!fs.existsSync(contactsPath)) {\n      console.log(\"‚è≠Ô∏è  No contacts.json file found, skipping contacts migration\");\n      return;\n    }\n\n    const data = fs.readFileSync(contactsPath, \"utf-8\");\n    const contacts: Contact[] = JSON.parse(data);\n\n    if (contacts.length === 0) {\n      console.log(\"‚è≠Ô∏è  No contacts to migrate\");\n      return;\n    }\n\n    const pool = await getPool();\n\n    for (const contact of contacts) {\n      try {\n        await pool.execute(\n          `INSERT INTO contacts (name, email, topic, subject, description, status, notes, createdAt, updatedAt) \n           VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)`,\n          [\n            contact.name,\n            contact.email,\n            contact.topic,\n            contact.subject,\n            contact.description,\n            contact.status || \"new\",\n            contact.notes || \"\",\n            contact.createdAt || new Date().toISOString(),\n            contact.updatedAt || new Date().toISOString(),\n          ]\n        );\n      } catch (error: any) {\n        console.error(`Error migrating contact ${contact.id}:`, error.message);\n      }\n    }\n\n    console.log(`‚úÖ Migrated ${contacts.length} contacts successfully`);\n  } catch (error) {\n    console.error(\"Error during contacts migration:\", error);\n  }\n}\n\nexport async function runMigrations() {\n  console.log(\"üîÑ Starting data migration from JSON to MySQL...\");\n  console.log(\"\");\n\n  try {\n    await migrateUsers();\n    await migratePayments();\n    await migrateContacts();\n\n    console.log(\"\");\n    console.log(\"‚úÖ All migrations completed successfully!\");\n  } catch (error) {\n    console.error(\"‚ùå Migration failed:\", error);\n  }\n}\n","import mysql from \"mysql2/promise\";\nimport dotenv from \"dotenv\";\nimport { runMigrations } from \"./migrate\";\n\ndotenv.config();\n\nlet pool: mysql.Pool | null = null;\n\nexport async function getPool(): Promise<mysql.Pool> {\n  if (pool) {\n    return pool;\n  }\n\n  pool = mysql.createPool({\n    host: process.env.DB_HOST || \"localhost\",\n    port: parseInt(process.env.DB_PORT || \"3306\"),\n    user: process.env.DB_USER || \"root\",\n    password: process.env.DB_PASSWORD || \"\",\n    database: process.env.DB_NAME || \"dzakcloud\",\n    waitForConnections: true,\n    connectionLimit: 10,\n    queueLimit: 0,\n    enableKeepAlive: true,\n    keepAliveInitialDelayMs: 0,\n  });\n\n  return pool;\n}\n\nexport async function initializeDatabase(): Promise<void> {\n  const pool = await getPool();\n\n  try {\n    // Create tables\n    const createTablesSQL = `\n      -- Users table\n      CREATE TABLE IF NOT EXISTS users (\n        id INT AUTO_INCREMENT PRIMARY KEY,\n        email VARCHAR(255) UNIQUE NOT NULL,\n        password VARCHAR(255) NOT NULL,\n        fullName VARCHAR(255) NOT NULL,\n        createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n        updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n      );\n\n      -- Payments table\n      CREATE TABLE IF NOT EXISTS payments (\n        id INT AUTO_INCREMENT PRIMARY KEY,\n        userId INT,\n        email VARCHAR(255) NOT NULL,\n        amount DECIMAL(10, 2) NOT NULL,\n        currency VARCHAR(3) DEFAULT 'IDR',\n        service VARCHAR(255) NOT NULL,\n        paymentId VARCHAR(255) UNIQUE NOT NULL,\n        status VARCHAR(50) DEFAULT 'pending',\n        qrCodeUrl LONGTEXT,\n        createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n        updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n        FOREIGN KEY (userId) REFERENCES users(id) ON DELETE CASCADE\n      );\n\n      -- Contacts table\n      CREATE TABLE IF NOT EXISTS contacts (\n        id INT AUTO_INCREMENT PRIMARY KEY,\n        name VARCHAR(255) NOT NULL,\n        email VARCHAR(255) NOT NULL,\n        topic VARCHAR(255) NOT NULL,\n        subject VARCHAR(255) NOT NULL,\n        description LONGTEXT NOT NULL,\n        status VARCHAR(50) DEFAULT 'new',\n        notes LONGTEXT,\n        createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n        updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n      );\n\n      -- Create indexes for better query performance\n      CREATE INDEX idx_users_email ON users(email);\n      CREATE INDEX idx_payments_userId ON payments(userId);\n      CREATE INDEX idx_payments_status ON payments(status);\n      CREATE INDEX idx_contacts_status ON contacts(status);\n    `;\n\n    // Execute each CREATE TABLE statement separately\n    const statements = createTablesSQL\n      .split(\";\")\n      .map((stmt) => stmt.trim())\n      .filter((stmt) => stmt && !stmt.startsWith(\"--\"));\n\n    for (const statement of statements) {\n      try {\n        await pool.execute(statement);\n        console.log(\"‚úÖ Executed:\", statement.substring(0, 50) + \"...\");\n      } catch (error: any) {\n        // Ignore \"already exists\" errors\n        if (!error.message.includes(\"already exists\")) {\n          console.error(\"‚ùå Error executing statement:\", error.message);\n        }\n      }\n    }\n\n    console.log(\"‚úÖ Database initialized successfully!\");\n\n    // Run migrations after tables are created\n    console.log(\"\");\n    await runMigrations();\n  } catch (error) {\n    console.error(\"‚ùå Database initialization error:\", error);\n    throw error;\n  }\n}\n\nexport async function closeDatabase(): Promise<void> {\n  if (pool) {\n    await pool.end();\n    pool = null;\n  }\n}\n","import { RequestHandler } from \"express\";\nimport { DemoResponse } from \"@shared/api\";\n\nexport const handleDemo: RequestHandler = (req, res) => {\n  const response: DemoResponse = {\n    message: \"Hello from Express server\",\n  };\n  res.status(200).json(response);\n};\n","import { RequestHandler } from \"express\";\nimport { getPool } from \"../db\";\nimport crypto from \"crypto\";\n\nexport const handleCreatePayment: RequestHandler = async (req, res) => {\n  try {\n    const { email, service, amount, qrCodeUrl, paymentId, status = \"pending\" } = req.body;\n\n    if (!email || !service || !amount) {\n      res.status(400).json({ error: \"Missing required fields: email, service, amount\" });\n      return;\n    }\n\n    const pool = await getPool();\n    const id = paymentId || crypto.randomBytes(8).toString(\"hex\");\n\n    const query = `\n      INSERT INTO payments (email, service, amount, paymentId, status, qrCodeUrl)\n      VALUES (?, ?, ?, ?, ?, ?)\n    `;\n\n    const [result] = await pool.execute(query, [\n      email,\n      service,\n      parseFloat(amount),\n      id,\n      status,\n      qrCodeUrl || null,\n    ]);\n\n    res.status(201).json({\n      success: true,\n      paymentId: id,\n      message: \"Payment created successfully\",\n      payment: {\n        id,\n        email,\n        service,\n        amount,\n        status,\n        qrCodeUrl,\n        createdAt: new Date().toISOString(),\n      },\n    });\n  } catch (error) {\n    console.error(\"Payment creation error:\", error);\n    res.status(500).json({ error: \"Internal server error\" });\n  }\n};\n\nexport const handleGetPayment: RequestHandler = async (req, res) => {\n  try {\n    const { id } = req.params;\n\n    const pool = await getPool();\n    const query = \"SELECT * FROM payments WHERE paymentId = ?\";\n    const [rows] = await pool.execute(query, [id]);\n\n    if (!Array.isArray(rows) || rows.length === 0) {\n      res.status(404).json({ error: \"Payment not found\" });\n      return;\n    }\n\n    res.json({\n      success: true,\n      payment: rows[0],\n    });\n  } catch (error) {\n    console.error(\"Payment retrieval error:\", error);\n    res.status(500).json({ error: \"Internal server error\" });\n  }\n};\n\nexport const handleGetAllPayments: RequestHandler = async (req, res) => {\n  try {\n    const pool = await getPool();\n    const query = \"SELECT * FROM payments ORDER BY createdAt DESC\";\n    const [rows] = await pool.execute(query);\n\n    res.json({\n      success: true,\n      count: Array.isArray(rows) ? rows.length : 0,\n      payments: Array.isArray(rows) ? rows : [],\n    });\n  } catch (error) {\n    console.error(\"Payments retrieval error:\", error);\n    res.status(500).json({ error: \"Internal server error\" });\n  }\n};\n\nexport const handleUpdatePayment: RequestHandler = async (req, res) => {\n  try {\n    const { id } = req.params;\n    const { status } = req.body;\n\n    if (!status) {\n      res.status(400).json({ error: \"Status is required\" });\n      return;\n    }\n\n    const pool = await getPool();\n\n    // Check if payment exists\n    const [checkRows] = await pool.execute(\n      \"SELECT * FROM payments WHERE paymentId = ?\",\n      [id]\n    );\n\n    if (!Array.isArray(checkRows) || checkRows.length === 0) {\n      res.status(404).json({ error: \"Payment not found\" });\n      return;\n    }\n\n    // Update payment\n    const query = \"UPDATE payments SET status = ?, updatedAt = NOW() WHERE paymentId = ?\";\n    await pool.execute(query, [status, id]);\n\n    const [updatedRows] = await pool.execute(\n      \"SELECT * FROM payments WHERE paymentId = ?\",\n      [id]\n    );\n\n    res.json({\n      success: true,\n      message: \"Payment updated successfully\",\n      payment: Array.isArray(updatedRows) ? updatedRows[0] : null,\n    });\n  } catch (error) {\n    console.error(\"Payment update error:\", error);\n    res.status(500).json({ error: \"Internal server error\" });\n  }\n};\n","import { RequestHandler } from \"express\";\nimport { getPool } from \"../db\";\n\nexport const handleCreateContact: RequestHandler = async (req, res) => {\n  try {\n    const { name, email, topic, subject, description } = req.body;\n\n    // Validate required fields\n    if (!name || !email || !topic || !subject || !description) {\n      res.status(400).json({\n        success: false,\n        error: \"Missing required fields\",\n      });\n      return;\n    }\n\n    // Basic email validation\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(email)) {\n      res.status(400).json({\n        success: false,\n        error: \"Invalid email format\",\n      });\n      return;\n    }\n\n    const pool = await getPool();\n    const query = `\n      INSERT INTO contacts (name, email, topic, subject, description, status, notes)\n      VALUES (?, ?, ?, ?, ?, 'new', '')\n    `;\n\n    const [result] = await pool.execute(query, [name, email, topic, subject, description]);\n\n    const id = (result as any).insertId;\n\n    res.status(201).json({\n      success: true,\n      message: \"Your message has been received. We'll get back to you soon!\",\n      contactId: id,\n      contact: {\n        id,\n        name,\n        email,\n        topic,\n        subject,\n        description,\n        status: \"new\",\n        notes: \"\",\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n      },\n    });\n  } catch (error) {\n    console.error(\"Contact creation error:\", error);\n    res.status(500).json({\n      success: false,\n      error: \"Internal server error\",\n    });\n  }\n};\n\nexport const handleGetContact: RequestHandler = async (req, res) => {\n  try {\n    const { id } = req.params;\n\n    const pool = await getPool();\n    const query = \"SELECT * FROM contacts WHERE id = ?\";\n    const [rows] = await pool.execute(query, [id]);\n\n    if (!Array.isArray(rows) || rows.length === 0) {\n      res.status(404).json({\n        success: false,\n        error: \"Contact not found\",\n      });\n      return;\n    }\n\n    res.json({\n      success: true,\n      contact: rows[0],\n    });\n  } catch (error) {\n    console.error(\"Contact retrieval error:\", error);\n    res.status(500).json({\n      success: false,\n      error: \"Internal server error\",\n    });\n  }\n};\n\nexport const handleGetAllContacts: RequestHandler = async (req, res) => {\n  try {\n    const pool = await getPool();\n    const { status } = req.query;\n\n    let query = \"SELECT * FROM contacts\";\n    const params: any[] = [];\n\n    if (status && typeof status === \"string\") {\n      query += \" WHERE status = ?\";\n      params.push(status.toLowerCase());\n    }\n\n    query += \" ORDER BY createdAt DESC\";\n\n    const [allRows] = await pool.execute(\"SELECT COUNT(*) as total FROM contacts\");\n    const [rows] = await pool.execute(query, params);\n\n    const total = Array.isArray(allRows) ? (allRows[0] as any).total : 0;\n\n    res.json({\n      success: true,\n      count: Array.isArray(rows) ? rows.length : 0,\n      total,\n      contacts: Array.isArray(rows) ? rows : [],\n    });\n  } catch (error) {\n    console.error(\"Contacts retrieval error:\", error);\n    res.status(500).json({\n      success: false,\n      error: \"Internal server error\",\n    });\n  }\n};\n\nexport const handleUpdateContact: RequestHandler = async (req, res) => {\n  try {\n    const { id } = req.params;\n    const { status, notes } = req.body;\n\n    const pool = await getPool();\n\n    // Check if contact exists\n    const [checkRows] = await pool.execute(\"SELECT * FROM contacts WHERE id = ?\", [id]);\n\n    if (!Array.isArray(checkRows) || checkRows.length === 0) {\n      res.status(404).json({\n        success: false,\n        error: \"Contact not found\",\n      });\n      return;\n    }\n\n    // Build update query dynamically\n    const updates: string[] = [];\n    const values: any[] = [];\n\n    if (status !== undefined) {\n      updates.push(\"status = ?\");\n      values.push(status);\n    }\n    if (notes !== undefined) {\n      updates.push(\"notes = ?\");\n      values.push(notes);\n    }\n\n    if (updates.length === 0) {\n      res.status(400).json({\n        success: false,\n        error: \"No fields to update\",\n      });\n      return;\n    }\n\n    updates.push(\"updatedAt = NOW()\");\n    values.push(id);\n\n    const query = `UPDATE contacts SET ${updates.join(\", \")} WHERE id = ?`;\n    await pool.execute(query, values);\n\n    const [updatedRows] = await pool.execute(\"SELECT * FROM contacts WHERE id = ?\", [id]);\n\n    res.json({\n      success: true,\n      message: \"Contact updated successfully\",\n      contact: Array.isArray(updatedRows) ? updatedRows[0] : null,\n    });\n  } catch (error) {\n    console.error(\"Contact update error:\", error);\n    res.status(500).json({\n      success: false,\n      error: \"Internal server error\",\n    });\n  }\n};\n\nexport const handleDeleteContact: RequestHandler = async (req, res) => {\n  try {\n    const { id } = req.params;\n\n    const pool = await getPool();\n\n    // Get contact before deletion\n    const [checkRows] = await pool.execute(\"SELECT * FROM contacts WHERE id = ?\", [id]);\n\n    if (!Array.isArray(checkRows) || checkRows.length === 0) {\n      res.status(404).json({\n        success: false,\n        error: \"Contact not found\",\n      });\n      return;\n    }\n\n    const deletedContact = checkRows[0];\n\n    // Delete contact\n    await pool.execute(\"DELETE FROM contacts WHERE id = ?\", [id]);\n\n    res.json({\n      success: true,\n      message: \"Contact deleted successfully\",\n      contact: deletedContact,\n    });\n  } catch (error) {\n    console.error(\"Contact deletion error:\", error);\n    res.status(500).json({\n      success: false,\n      error: \"Internal server error\",\n    });\n  }\n};\n\nexport const handleGetContactStats: RequestHandler = async (req, res) => {\n  try {\n    const pool = await getPool();\n\n    // Get counts by status\n    const [statusRows] = await pool.execute(\n      \"SELECT status, COUNT(*) as count FROM contacts GROUP BY status\"\n    );\n\n    const stats = {\n      total: 0,\n      new: 0,\n      inProgress: 0,\n      resolved: 0,\n    };\n\n    if (Array.isArray(statusRows)) {\n      for (const row of statusRows) {\n        const statusRow = row as any;\n        const count = statusRow.count || 0;\n        stats.total += count;\n\n        if (statusRow.status === \"new\") stats.new = count;\n        else if (statusRow.status === \"in_progress\") stats.inProgress = count;\n        else if (statusRow.status === \"resolved\") stats.resolved = count;\n      }\n    }\n\n    // Get topic breakdown\n    const [topicRows] = await pool.execute(\n      \"SELECT topic, COUNT(*) as count FROM contacts GROUP BY topic\"\n    );\n\n    const topicBreakdown: Record<string, number> = {};\n    if (Array.isArray(topicRows)) {\n      for (const row of topicRows) {\n        const topicRow = row as any;\n        topicBreakdown[topicRow.topic] = topicRow.count || 0;\n      }\n    }\n\n    res.json({\n      success: true,\n      stats: {\n        ...stats,\n        topicBreakdown,\n      },\n    });\n  } catch (error) {\n    console.error(\"Stats retrieval error:\", error);\n    res.status(500).json({\n      success: false,\n      error: \"Internal server error\",\n    });\n  }\n};\n","import { RequestHandler } from \"express\";\nimport { getPool } from \"../db\";\n\n// Simple token generation (in production, use JWT)\nconst generateToken = (): string => {\n  return `token_${Date.now()}_${Math.random().toString(36).substring(7)}`;\n};\n\n// Simple password hashing (in production, use bcrypt)\nconst hashPassword = (password: string): string => {\n  return Buffer.from(password).toString(\"base64\");\n};\n\nconst verifyPassword = (password: string, hash: string): boolean => {\n  return hashPassword(password) === hash;\n};\n\nexport const handleRegister: RequestHandler = async (req, res) => {\n  try {\n    const { name, email, password } = req.body;\n\n    // Validation\n    if (!name || !email || !password) {\n      res.status(400).json({\n        success: false,\n        message: \"Missing required fields\",\n      });\n      return;\n    }\n\n    if (password.length < 6) {\n      res.status(400).json({\n        success: false,\n        message: \"Password must be at least 6 characters long\",\n      });\n      return;\n    }\n\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(email)) {\n      res.status(400).json({\n        success: false,\n        message: \"Invalid email format\",\n      });\n      return;\n    }\n\n    const pool = await getPool();\n\n    // Check if user already exists\n    const [existingUsers] = await pool.execute(\n      \"SELECT * FROM users WHERE email = ?\",\n      [email]\n    );\n\n    if (Array.isArray(existingUsers) && existingUsers.length > 0) {\n      res.status(409).json({\n        success: false,\n        message: \"Email already registered\",\n      });\n      return;\n    }\n\n    // Create new user\n    const query = `\n      INSERT INTO users (email, password, fullName)\n      VALUES (?, ?, ?)\n    `;\n\n    const [result] = await pool.execute(query, [email, hashPassword(password), name]);\n    const userId = (result as any).insertId;\n\n    const token = generateToken();\n\n    res.status(201).json({\n      success: true,\n      message: \"Account created successfully\",\n      token,\n      user: {\n        id: userId,\n        name,\n        email,\n        createdAt: new Date().toISOString(),\n      },\n    });\n  } catch (error) {\n    console.error(\"Registration error:\", error);\n    res.status(500).json({\n      success: false,\n      message: \"Internal server error\",\n    });\n  }\n};\n\nexport const handleLogin: RequestHandler = async (req, res) => {\n  try {\n    const { email, password } = req.body;\n\n    // Validation\n    if (!email || !password) {\n      res.status(400).json({\n        success: false,\n        message: \"Email and password are required\",\n      });\n      return;\n    }\n\n    const pool = await getPool();\n    const [rows] = await pool.execute(\"SELECT * FROM users WHERE email = ?\", [email]);\n\n    if (!Array.isArray(rows) || rows.length === 0) {\n      res.status(401).json({\n        success: false,\n        message: \"Invalid email or password\",\n      });\n      return;\n    }\n\n    const user = rows[0] as any;\n\n    if (!verifyPassword(password, user.password)) {\n      res.status(401).json({\n        success: false,\n        message: \"Invalid email or password\",\n      });\n      return;\n    }\n\n    const token = generateToken();\n\n    res.json({\n      success: true,\n      message: \"Login successful\",\n      token,\n      user: {\n        id: user.id,\n        name: user.fullName,\n        email: user.email,\n        createdAt: user.createdAt,\n      },\n    });\n  } catch (error) {\n    console.error(\"Login error:\", error);\n    res.status(500).json({\n      success: false,\n      message: \"Internal server error\",\n    });\n  }\n};\n\nexport const handleGetProfile: RequestHandler = async (req, res) => {\n  try {\n    const token = req.headers.authorization?.replace(\"Bearer \", \"\");\n\n    if (!token) {\n      res.status(401).json({\n        success: false,\n        message: \"Unauthorized\",\n      });\n      return;\n    }\n\n    // In a real app, verify the token properly\n    const userId = (req as any).userId;\n\n    const pool = await getPool();\n    const [rows] = await pool.execute(\"SELECT * FROM users WHERE id = ?\", [userId]);\n\n    if (!Array.isArray(rows) || rows.length === 0) {\n      res.status(404).json({\n        success: false,\n        message: \"User not found\",\n      });\n      return;\n    }\n\n    const user = rows[0] as any;\n\n    res.json({\n      success: true,\n      user: {\n        id: user.id,\n        name: user.fullName,\n        email: user.email,\n        createdAt: user.createdAt,\n      },\n    });\n  } catch (error) {\n    console.error(\"Get profile error:\", error);\n    res.status(500).json({\n      success: false,\n      message: \"Internal server error\",\n    });\n  }\n};\n\nexport const handleUpdateProfile: RequestHandler = async (req, res) => {\n  try {\n    const token = req.headers.authorization?.replace(\"Bearer \", \"\");\n\n    if (!token) {\n      res.status(401).json({\n        success: false,\n        message: \"Unauthorized\",\n      });\n      return;\n    }\n\n    const { name, email } = req.body;\n    const userId = (req as any).userId;\n\n    const pool = await getPool();\n\n    // Check if user exists\n    const [userRows] = await pool.execute(\"SELECT * FROM users WHERE id = ?\", [userId]);\n\n    if (!Array.isArray(userRows) || userRows.length === 0) {\n      res.status(404).json({\n        success: false,\n        message: \"User not found\",\n      });\n      return;\n    }\n\n    const user = userRows[0] as any;\n\n    // Check if new email is already in use\n    if (email && email !== user.email) {\n      const [existingEmail] = await pool.execute(\n        \"SELECT * FROM users WHERE email = ? AND id != ?\",\n        [email, userId]\n      );\n\n      if (Array.isArray(existingEmail) && existingEmail.length > 0) {\n        res.status(409).json({\n          success: false,\n          message: \"Email already in use\",\n        });\n        return;\n      }\n    }\n\n    // Update user\n    const updates: string[] = [];\n    const values: any[] = [];\n\n    if (name) {\n      updates.push(\"fullName = ?\");\n      values.push(name);\n    }\n    if (email) {\n      updates.push(\"email = ?\");\n      values.push(email);\n    }\n\n    if (updates.length === 0) {\n      res.status(400).json({\n        success: false,\n        message: \"No fields to update\",\n      });\n      return;\n    }\n\n    values.push(userId);\n\n    const query = `UPDATE users SET ${updates.join(\", \")}, updatedAt = NOW() WHERE id = ?`;\n    await pool.execute(query, values);\n\n    const [updatedRows] = await pool.execute(\"SELECT * FROM users WHERE id = ?\", [userId]);\n    const updatedUser = Array.isArray(updatedRows) ? (updatedRows[0] as any) : null;\n\n    res.json({\n      success: true,\n      message: \"Profile updated successfully\",\n      user: {\n        id: updatedUser?.id,\n        name: updatedUser?.fullName,\n        email: updatedUser?.email,\n        createdAt: updatedUser?.createdAt,\n      },\n    });\n  } catch (error) {\n    console.error(\"Update profile error:\", error);\n    res.status(500).json({\n      success: false,\n      message: \"Internal server error\",\n    });\n  }\n};\n\nexport const handleLogout: RequestHandler = async (req, res) => {\n  try {\n    // In a real app, invalidate the token\n    res.json({\n      success: true,\n      message: \"Logout successful\",\n    });\n  } catch (error) {\n    console.error(\"Logout error:\", error);\n    res.status(500).json({\n      success: false,\n      message: \"Internal server error\",\n    });\n  }\n};\n","import \"dotenv/config\";\nimport express from \"express\";\nimport cors from \"cors\";\nimport { initializeDatabase } from \"./db\";\nimport { handleDemo } from \"./routes/demo\";\nimport {\n  handleCreatePayment,\n  handleGetPayment,\n  handleGetAllPayments,\n  handleUpdatePayment,\n} from \"./routes/payment\";\nimport {\n  handleCreateContact,\n  handleGetContact,\n  handleGetAllContacts,\n  handleUpdateContact,\n  handleDeleteContact,\n  handleGetContactStats,\n} from \"./routes/contact\";\nimport {\n  handleRegister,\n  handleLogin,\n  handleGetProfile,\n  handleUpdateProfile,\n  handleLogout,\n} from \"./routes/auth\";\n\nexport async function createServer() {\n  // Initialize database\n  try {\n    await initializeDatabase();\n    console.log(\"‚úÖ Database connection established\");\n  } catch (error) {\n    console.error(\"‚ùå Failed to initialize database:\", error);\n  }\n  const app = express();\n\n  // Middleware\n  app.use(cors());\n  app.use(express.json());\n  app.use(express.urlencoded({ extended: true }));\n\n  // Example API routes\n  app.get(\"/api/ping\", (_req, res) => {\n    const ping = process.env.PING_MESSAGE ?? \"ping\";\n    res.json({ message: ping });\n  });\n\n  app.get(\"/api/demo\", handleDemo);\n\n  // Payment API routes\n  app.post(\"/api/payment\", handleCreatePayment);\n  app.get(\"/api/payment/:id\", handleGetPayment);\n  app.get(\"/api/payments\", handleGetAllPayments);\n  app.patch(\"/api/payment/:id\", handleUpdatePayment);\n\n  // Contact API routes\n  app.post(\"/api/contact\", handleCreateContact);\n  app.get(\"/api/contact/:id\", handleGetContact);\n  app.get(\"/api/contacts\", handleGetAllContacts);\n  app.patch(\"/api/contact/:id\", handleUpdateContact);\n  app.delete(\"/api/contact/:id\", handleDeleteContact);\n  app.get(\"/api/contacts/stats\", handleGetContactStats);\n\n  // Auth API routes\n  app.post(\"/api/auth/register\", handleRegister);\n  app.post(\"/api/auth/login\", handleLogin);\n  app.get(\"/api/auth/profile\", handleGetProfile);\n  app.patch(\"/api/auth/profile\", handleUpdateProfile);\n  app.post(\"/api/auth/logout\", handleLogout);\n\n  return app;\n}\n","import path from \"path\";\nimport { createServer } from \"./index\";\nimport { closeDatabase } from \"./db\";\nimport * as express from \"express\";\n\nconst port = process.env.PORT || 3000;\n\n// Start server\n(async () => {\n  const app = await createServer();\n\n  // In production, serve the built SPA files\n  const __dirname = import.meta.dirname;\n  const distPath = path.join(__dirname, \"../spa\");\n\n  // Serve static files\n  app.use(express.static(distPath));\n\n  // Handle React Router - serve index.html for all non-API routes\n  app.get(\"*\", (req, res) => {\n    // Don't serve index.html for API routes\n    if (req.path.startsWith(\"/api/\") || req.path.startsWith(\"/health\")) {\n      return res.status(404).json({ error: \"API endpoint not found\" });\n    }\n\n    res.sendFile(path.join(distPath, \"index.html\"));\n  });\n\n  app.listen(port, () => {\n    console.log(`üöÄ Fusion Starter server running on port ${port}`);\n    console.log(`üì± Frontend: http://localhost:${port}`);\n    console.log(`üîß API: http://localhost:${port}/api`);\n  });\n\n  // Graceful shutdown\n  process.on(\"SIGTERM\", async () => {\n    console.log(\"üõë Received SIGTERM, shutting down gracefully\");\n    await closeDatabase();\n    process.exit(0);\n  });\n\n  process.on(\"SIGINT\", async () => {\n    console.log(\"üõë Received SIGINT, shutting down gracefully\");\n    await closeDatabase();\n    process.exit(0);\n  });\n})();\n"],"names":["pool","express"],"mappings":"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"}